{"version":3,"sources":["../../../../src/basic/Tabs/index.js"],"names":["React","require","PropTypes","Component","ReactNative","Dimensions","View","Animated","ScrollView","StyleSheet","InteractionManager","Platform","ViewPropTypes","TimerMixin","SceneComponent","DefaultTabBar","ScrollableTabBar","ScrollableTabView","createClass","mixins","statics","propTypes","tabBarPosition","oneOf","initialPage","number","page","onChangeTab","func","onScroll","renderTabBar","any","style","contentProps","object","scrollWithoutAnimation","bool","locked","prerenderingSiblingsNumber","getDefaultProps","getInitialState","currentPage","props","scrollValue","Value","containerWidth","get","width","sceneKeys","newSceneKeys","componentDidMount","scrollFn","scrollView","OS","x","state","scrollTo","animated","setTimeout","runAfterInteractions","componentWillReceiveProps","children","updateSceneKeys","goToPage","pageNumber","offset","y","callback","_onChangeTab","bind","cloneElement","newKeys","previousKeys","setState","_children","forEach","child","idx","key","_makeSceneKey","_keyExists","_shouldRenderSceneKey","push","currentPageKey","numOfSibling","find","sceneKey","heading","renderScrollableContent","scenes","_composeScenes","offsetX","e","nativeEvent","contentOffset","_updateScrollValue","_onMomentumScrollBeginAndEnd","map","Math","round","_updateSelectedPage","nextPage","localNextPage","position","prevPage","i","ref","from","value","setValue","_handleLayout","layout","requestAnimationFrame","Children","render","overlayTabs","tabBarProps","tabs","tabStyle","activeTabStyle","textStyle","activeTextStyle","tabHeaderStyle","undefined","activeTab","tabBarBackgroundColor","backgroundColor","tabBarActiveTextColor","activeTextColor","tabBarInactiveTextColor","inactiveTextColor","tabBarTextStyle","tabBarUnderlineStyle","underlineStyle","left","right","styles","container","module","exports","create","flex","scrollableContentAndroid"],"mappings":"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","file":"index.js","sourcesContent":["const React = require(\"react\");\nconst { PropTypes, Component } = React;\nconst ReactNative = require(\"react-native\");\nconst {\n  Dimensions,\n  View,\n  Animated,\n  ScrollView,\n  StyleSheet,\n  InteractionManager,\n  Platform,\n  ViewPropTypes\n} = ReactNative;\nconst TimerMixin = require(\"react-timer-mixin\");\nimport _ from \"lodash\";\n\nconst SceneComponent = require(\"./SceneComponent\");\nconst { DefaultTabBar } = require(\"./DefaultTabBar\");\nconst { ScrollableTabBar } = require(\"./ScrollableTabBar\");\n\nconst ScrollableTabView = React.createClass({\n  mixins: [TimerMixin],\n  statics: {\n    DefaultTabBar,\n    ScrollableTabBar\n  },\n\n  propTypes: {\n    tabBarPosition: PropTypes.oneOf([\n      \"top\",\n      \"bottom\",\n      \"overlayTop\",\n      \"overlayBottom\"\n    ]),\n    initialPage: PropTypes.number,\n    page: PropTypes.number,\n    onChangeTab: PropTypes.func,\n    onScroll: PropTypes.func,\n    renderTabBar: PropTypes.any,\n    style: ViewPropTypes.style,\n    contentProps: PropTypes.object,\n    scrollWithoutAnimation: PropTypes.bool,\n    locked: PropTypes.bool,\n    prerenderingSiblingsNumber: PropTypes.number\n  },\n\n  getDefaultProps() {\n    return {\n      tabBarPosition: \"top\",\n      initialPage: 0,\n      page: -1,\n      onChangeTab: () => {},\n      onScroll: () => {},\n      contentProps: {},\n      scrollWithoutAnimation: false,\n      locked: false,\n      prerenderingSiblingsNumber: 0\n    };\n  },\n\n  getInitialState() {\n    return {\n      currentPage: this.props.initialPage,\n      scrollValue: new Animated.Value(this.props.initialPage),\n      containerWidth: Dimensions.get(\"window\").width,\n      sceneKeys: this.newSceneKeys({ currentPage: this.props.initialPage })\n    };\n  },\n\n  componentDidMount() {\n    const scrollFn = () => {\n      if (this.scrollView && Platform.OS === \"android\") {\n        const x = this.props.initialPage * this.state.containerWidth;\n        this.scrollView.scrollTo({ x, animated: false });\n      }\n    };\n    this.setTimeout(() => {\n      InteractionManager.runAfterInteractions(scrollFn);\n    }, 0);\n  },\n\n  componentWillReceiveProps(props) {\n    if (props.children !== this.props.children) {\n      this.updateSceneKeys({\n        page: this.state.currentPage,\n        children: props.children\n      });\n    }\n\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\n      this.goToPage(props.page);\n    }\n  },\n\n  goToPage(pageNumber) {\n    const offset = pageNumber * this.state.containerWidth;\n    if (this.scrollView) {\n      this.scrollView.scrollTo({\n        x: offset,\n        y: 0,\n        animated: !this.props.scrollWithoutAnimation\n      });\n    }\n\n    const currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: pageNumber,\n      callback: this._onChangeTab.bind(this, currentPage, pageNumber)\n    });\n  },\n\n  renderTabBar(props) {\n    if (this.props.renderTabBar === false) {\n      return null;\n    } else if (this.props.renderTabBar) {\n      return React.cloneElement(this.props.renderTabBar(props), props);\n    } else {\n      return <DefaultTabBar {...props} />;\n    }\n  },\n\n  updateSceneKeys({\n    page,\n    children = this.props.children,\n    callback = () => {}\n  }) {\n    let newKeys = this.newSceneKeys({\n      previousKeys: this.state.sceneKeys,\n      currentPage: page,\n      children\n    });\n    this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\n  },\n\n  newSceneKeys({\n    previousKeys = [],\n    currentPage = 0,\n    children = this.props.children\n  }) {\n    let newKeys = [];\n    this._children(children).forEach((child, idx) => {\n      let key = this._makeSceneKey(child, idx);\n      if (\n        this._keyExists(previousKeys, key) ||\n        this._shouldRenderSceneKey(idx, currentPage)\n      ) {\n        newKeys.push(key);\n      }\n    });\n    return newKeys;\n  },\n\n  _shouldRenderSceneKey(idx, currentPageKey) {\n    let numOfSibling = this.props.prerenderingSiblingsNumber;\n    return (\n      idx < currentPageKey + numOfSibling + 1 &&\n      idx > currentPageKey - numOfSibling - 1\n    );\n  },\n\n  _keyExists(sceneKeys, key) {\n    return sceneKeys.find(sceneKey => key === sceneKey);\n  },\n\n  _makeSceneKey(child, idx) {\n    return child.props.heading + \"_\" + idx;\n  },\n\n  renderScrollableContent() {\n    const scenes = this._composeScenes();\n    return (\n      <ScrollView\n        horizontal\n        pagingEnabled\n        automaticallyAdjustContentInsets={false}\n        contentOffset={{\n          x: this.props.initialPage * this.state.containerWidth\n        }}\n        ref={scrollView => {\n          this.scrollView = scrollView;\n        }}\n        onScroll={e => {\n          const offsetX = e.nativeEvent.contentOffset.x;\n          this._updateScrollValue(offsetX / this.state.containerWidth);\n        }}\n        onMomentumScrollBegin={this._onMomentumScrollBeginAndEnd}\n        onMomentumScrollEnd={this._onMomentumScrollBeginAndEnd}\n        scrollEventThrottle={16}\n        scrollsToTop={false}\n        showsHorizontalScrollIndicator={false}\n        scrollEnabled={!this.props.locked}\n        directionalLockEnabled\n        alwaysBounceVertical={false}\n        keyboardDismissMode=\"on-drag\"\n        {...this.props.contentProps}\n      >\n        {scenes}\n      </ScrollView>\n    );\n  },\n\n  _composeScenes() {\n    return this._children().map((child, idx) => {\n      let key = this._makeSceneKey(child, idx);\n      return (\n        <SceneComponent\n          key={child.key}\n          shouldUpdated={this._shouldRenderSceneKey(\n            idx,\n            this.state.currentPage\n          )}\n          style={{ width: this.state.containerWidth }}\n        >\n          {this._keyExists(this.state.sceneKeys, key)\n            ? child\n            : <View heading={child.props.heading} />}\n        </SceneComponent>\n      );\n    });\n  },\n\n  _onMomentumScrollBeginAndEnd(e) {\n    const offsetX = e.nativeEvent.contentOffset.x;\n    const page = Math.round(offsetX / this.state.containerWidth);\n    if (this.state.currentPage !== page) {\n      this._updateSelectedPage(page);\n    }\n  },\n\n  _updateSelectedPage(nextPage) {\n    let localNextPage = nextPage;\n    if (typeof localNextPage === \"object\") {\n      localNextPage = nextPage.nativeEvent.position;\n    }\n\n    const currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: localNextPage,\n      callback: this._onChangeTab.bind(this, currentPage, localNextPage)\n    });\n  },\n\n  _onChangeTab(prevPage, currentPage) {\n    this.props.onChangeTab({\n      i: currentPage,\n      ref: this._children()[currentPage],\n      from: prevPage\n    });\n  },\n\n  _updateScrollValue(value) {\n    this.state.scrollValue.setValue(value);\n    this.props.onScroll(value);\n  },\n\n  _handleLayout(e) {\n    const { width } = e.nativeEvent.layout;\n\n    if (Math.round(width) !== Math.round(this.state.containerWidth)) {\n      this.setState({ containerWidth: width });\n      this.requestAnimationFrame(() => {\n        this.goToPage(this.state.currentPage);\n      });\n    }\n  },\n\n  _children(children = this.props.children) {\n    return React.Children.map(children, child => child);\n  },\n\n  render() {\n    let overlayTabs =\n      this.props.tabBarPosition === \"overlayTop\" ||\n      this.props.tabBarPosition === \"overlayBottom\";\n    let tabBarProps = {\n      goToPage: this.goToPage,\n      tabs: this._children().map(child => child.props.heading),\n      tabStyle: this._children().map(child => child.props.tabStyle),\n      activeTabStyle: this._children().map(child => child.props.activeTabStyle),\n      textStyle: this._children().map(child => child.props.textStyle),\n      activeTextStyle: this._children().map(\n        child => child.props.activeTextStyle\n      ),\n      tabHeaderStyle: this._children().map(child =>\n        _.get(child.props.heading.props, \"style\", undefined)\n      ),\n      activeTab: this.state.currentPage,\n      scrollValue: this.state.scrollValue,\n      containerWidth: this.state.containerWidth\n    };\n\n    if (this.props.tabBarBackgroundColor) {\n      tabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\n    }\n    if (this.props.tabBarActiveTextColor) {\n      tabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\n    }\n    if (this.props.tabBarInactiveTextColor) {\n      tabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\n    }\n    if (this.props.tabBarTextStyle) {\n      tabBarProps.textStyle = this.props.tabBarTextStyle;\n    }\n    if (this.props.tabBarUnderlineStyle) {\n      tabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\n    }\n    if (overlayTabs) {\n      tabBarProps.style = {\n        position: \"absolute\",\n        left: 0,\n        right: 0,\n        [this.props.tabBarPosition === \"overlayTop\" ? \"top\" : \"bottom\"]: 0\n      };\n    }\n\n    return (\n      <View\n        style={[styles.container, this.props.style]}\n        onLayout={this._handleLayout}\n      >\n        {this.props.tabBarPosition === \"top\" && this.renderTabBar(tabBarProps)}\n        {this.renderScrollableContent()}\n        {(this.props.tabBarPosition === \"bottom\" || overlayTabs) &&\n          this.renderTabBar(tabBarProps)}\n      </View>\n    );\n  }\n});\n\nmodule.exports = ScrollableTabView;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  scrollableContentAndroid: {\n    flex: 1\n  }\n});\n"]}